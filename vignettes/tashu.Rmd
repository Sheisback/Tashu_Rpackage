---
title: "tashu : Analysis and Demand forecast for Public bicycles('Tashu') in Daejeon, South Korea"
author: "JiWon Min"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
## 1. Introduction
 The public bicycle system is spreading globally as a green public transportation. In major cities around the world, public bicycle systems are leading to the effects of distribution of public transportation demand and the increase of citizens' exercise.  Bicycle arrangement on time is needed for operating this system smoothly. To know time when bicycle would be moved, Analyzing citizens' bicycle rental history is neccessary.
This package provides real bicycle rental/return history which has been recorded on public bicycle system(called 'Tashu') in Daejeon city, South Korea for 3 years, external data affecting bicycle rental(such as weather) and analyzing functions. Through this package, Users can analyze citizens' bicycle rental/return pattern free.
 
 

## 2. Data
1.    Tashu Data
: Bicycle rental history on Tashu from 2013 to 2015. Data is consisted of "RENT STATION, RENT DATE, RETURN STATION, RETURN DATE"
* tashu : Rental/Return record from 2013 to 2015.

```{r}
load(file = "../data/tashu.rda")
head(tashu, n = 5)
```

2.    Tashu Station Data
: By 2014 there were 144 bicycle stations on "Tashu" system. In this package, only the existing data of 144 stations are considered. Data is consisted of "NUM(Number of station), NUMOFBIKE_RACK(Number of Bike rack), GEODATA_lat(Latitude of station), GEODATA_lon(Longitude of station)"

* tashuStationData : data of 144 Stations on Tashu system. 
```{r}
load(file = "../data/tashuStationData.rda")
head(tashuStationData, n = 5)
```

3.    Weather Data
: Weather Data In Daejeon from 2013 to 2015. Data is consisted of "datetime, temperature, rainfall, windspeed, wind direction, humidity, Dew point temperature, Local Pressure, Sea surface Pressure, Sunshine, Solar Radiation, Snowfall, Ground Temperature"

* weather : weather data in Daejeon from 2013 to 2015

```{r}
load(file = "../data/weather.rda")
head(weather2013, n = 5)
```

## 3. Analysis function

This package provides some functions that analyze bicycle rental/return history. We implements functions showing popular top 10 stations and pathes and change of rental amount according to day and month.

1.    top10_stations()
: This function presents top 10 stations that have most number of bike rental for 3 years.

```{r, fig.width=7,fig.height=8}
library(tashu)
top10_stations()
```

2.    top10_pathes()
: This function presents top 10 pathes that have mostly used for 3 years.

```{r, fig.width=7,fig.height=8}
library(tashu)
top10_pathes()
```

3.    daily_bike_rental()
: This function shows average amount of bike rental in each months.

```{r, fig.width=7,fig.height=8}
library(tashu)
daily_bike_rental()
```

4.    monthly_bike_rental()
: This function shows bike usage pattern in each day of week.

```{r, fig.width=7,fig.height=8}
library(tashu)
monthly_bike_rental()
```


## 4. Prediction stations

 This package provides function that predict the demand of bike rental using random Forest. Users must go through the process of "generating training data → establishing a prediction model → inputing testing data and predict → confirming forecast results" for prediction.

1.    createTrainData(stationNum)
: This function generates training data for the random forest prediction model. This function preprocesses the bicycle rental history, weather, and festival data that occurred at "stationNum" stop in 2013 ~ 2014, you can generate training data with following code.
```{r}
#trainData <- createTrainData(1)
```

2.    createTestData(stationNum)
: This function generates testing data that would be used for prediction. Bike rental history at the "stationNum" stop, weather and festival data in 2015 are preprocessed and you can generate training data with following code.
 
```{r}
#testData <- createTestData(1)
```

3.    predictDemandOfBikesUsingRF(trainData, testData, isImportance, numOfTree, type)
: This function takes trainData and testData as parameters and performs prediction about amount of bike rental at stationNum stop. First, It implements the random forest prediction model with trainData and input testData to predict the demand of bike rental in 2015. And below source code is example.
 
```{r}
#resultData <- predictDemandOfBikesUsingRF(trainData, testData, numOfTree = 50)
```
